fun handle(a) do
    result = 'HTTP/1.1 200 OK\r\nContent-Type: text/plain\r\n\r\ndrax-lang'
    {
        data: result,
        status_code: 200
    }
end

tid = http.start({
        port: '8080',
        request_timeout_ms: '10000',
        request_handler: &handle/1
      }, nil)

sleep(1000)

res = os.cmd("curl -s http://localhost:8080")
assert(res == "drax-lang", "http request localhost:8080")

http.stop(tid)
print("Http text/plain done!")
