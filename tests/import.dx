test_val = 10

path = './export.dx'

liba = import('./import.dx') ## no error
lib = import('./export.dx')
lib2 = import(path)
lib3 = import('./export.dx')

assert(test_val == 10, "the global scope is being changed")

assert(lib.calc(5, 5) == 25,  "lib.calc_two(5, 5) == 25")
assert(lib2.calc(5, 5) == 25, "lib2.calc_two(5, 5) == 25")
assert(lib3.calc(5, 5) == 25, "lib3.calc_two(5, 5) == 25")

assert(lib.name == 'drax language', "lib.name == 'drax language'")
assert(lib.key1 == 'str value', "lib.key1 == 'str value'")
assert(lib.key2 == 123, "lib.key2 == 123")

assert(lib2.name == 'drax language', "lib2.name == 'drax language'")
assert(lib2.key1 == 'str value', "lib2.key1 == 'str value'")
assert(lib2.key2 == 123, "lib2.key2 == 123")

assert(lib3.name == 'drax language', "lib3.name == 'drax language'")
assert(lib3.key1 == 'str value', "lib3.key1 == 'str value'")
assert(lib3.key2 == 123, "lib3.key2 == 123")

assert(List.at(lib.key3, 0) == 123, "lib.key3[0] == 123")
assert(List.at(lib.key3, 1) == 456, "lib.key3[1] == 456")
assert(lib.key4.k == 'v', "lib.key4.k == 'v'")

assert(List.at(lib2.key3, 0) == 123, "lib2.key3[0] == 123")
assert(List.at(lib2.key3, 1) == 456, "lib2.key3[1] == 456")
assert(lib2.key4.k == 'v', "lib2.key4.k == 'v'")

assert(List.at(lib3.key3, 0) == 123, "lib3.key3[0] == 123")
assert(List.at(lib3.key3, 1) == 456, "lib3.key3[1] == 456")
assert(lib3.key4.k == 'v', "lib3.key4.k == 'v'")

print('Import done!')